<html>
<head>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>


    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>

    <style type="text/css">
        .header_table{
        font: 2em Helvetica Neue;
        color : #fff;
        text-align: center !important;
        background: rgba(0, 0, 0, .5);
        }
        .StyleRows {
        background-color: #fff;
        color: #6E7D87;
        font: 1.2em Helvetica Neue;
        min-height:20px;
        text-align: center !important;
        }

        .StyleRows:hover {color: #0e2f44;
        font-weight: bold;
        }

    </style>

</head>
<body>
<div class="container-fluid">

    <div class="jumbotron" style="height: 400px; ">
        <div class="row" >
            <div class="col-md-6" >
                <div id="donutchart" style="width: 100%; height: 320px; "></div></div>
            <div class="col-md-6 " >
                <div class="panel panel-default" style="height: 320px; overflow: scroll;">

                    <div class="list-group">
                        <a href="#" class="list-group-item ">
                            <h4 class="list-group-item-heading">Number of matches </h4>
                            <p class="list-group-item-text"><p id="total_match"></p></p>
                        </a>
                        <a href="#" class="list-group-item ">
                            <h4 class="list-group-item-heading">Taxon</h4>
                            <p class="list-group-item-text"><p id="taxon"></p></p>
                        </a>
                        <a href="#" class="list-group-item ">
                            <h4 class="list-group-item-heading">Number of Perfect</h4>
                            <p class="list-group-item-text"><p id="number_perfect"></p></p>
                        </a>
                        <a href="#" class="list-group-item ">
                            <h4 class="list-group-item-heading">Number of multi</h4>
                            <p class="list-group-item-text"><p id="number_multi"></p></p>
                        </a>
                        <a href="#" class="list-group-item ">
                            <h4 class="list-group-item-heading">Number of none</h4>
                            <p class="list-group-item-text"><p id="number_none"></p></p>
                        </a>
                        <a href="#" class="list-group-item ">
                            <h4 class="list-group-item-heading">Number of semi</h4>
                            <p class="list-group-item-text"><p id="number_semi"></p></p>
                        </a>

                    </div>


                </div>
            </div>
        </div>
    </div>






    <div class="jumbotron" style="height: 530px; overflow: scroll;">
        <p style="text-align: center">Choose a type of match on the donut chart or the list above to display details.
            <button type="button" id="bout" class="btn btn-default btn-sm"> Hide
                <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
            </button></p>
        <div class="row">
            <div class="col-md-12 ">

                <div id="table_div_parent" style="width: 100%;"></div>

                <div id="table_div" style="height:380px "></div>



            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function() {
      $.ajaxSetup({ cache: false });
    });

    google.load("visualization", "1", {packages:["corechart"]});
    google.setOnLoadCallback(drawChart);
    function drawChart() {
    $.getJSON('Homininae_HUMAN_PANTR.json', function(data_taxon) {

      var data = google.visualization.arrayToDataTable([
        ['type', 'Percentage'],
        ['Perfect',     data_taxon.ratio_perfect],
        ['Multi',      data_taxon.ratio_multi],
        ['Semi',  data_taxon.ratio_semi],
        ['None', data_taxon.ratio_none]
        ]);


      var options = {
        title: 'Percentage of matches at ' + data_taxon.taxon,
        pieHole: 0.2,

      };

      var chart = new google.visualization.PieChart(document.getElementById('donutchart'));
      function selectHandler() {
        var selectedItem = chart.getSelection()[0];
        if (selectedItem) {
          var topping = data.getValue(selectedItem.row, 0);
          change_data(topping);


        }
      }
      google.visualization.events.addListener(chart, 'select', selectHandler);
      chart.draw(data, options);
            });
    }
  </script>

<script type="text/javascript">
    google.load("visualization", "1", {packages:["table"]});
    function change_data(topping){
      var filename;

      $.getJSON('Homininae_HUMAN_PANTR.json', function(data) {

        var separater ='* ';
        var newdata = new google.visualization.DataTable();
        newdata.addRows(data.tinder[topping].length);
        newdata.addColumn('string', 'Type');
        newdata.addColumn('string', 'bottom');
        newdata.addColumn('string', 'cutting');
        $.each(data.tinder[topping], function(i,v) {

        var genesb=separater;
        for (var e in v.family['bottom']) {
            for (var g in v.family['bottom'][e]){
          genesb=genesb+v.family['bottom'][e][g]+'\n'
          }
          genesb=genesb+ separater;
          }
      var genesc=separater;
        for (var e in v.family['cutting']) {
          for (var g in v.family['cutting'][e]){
          genesc=genesc+v.family['cutting'][e][g]+'\n'
          }
          genesc=genesc+ separater;
      }
        newdata.setValue(i, 0, v.result);
        newdata.setValue(i, 1, genesb);
        newdata.setValue(i, 2, genesc);

       });
       var StyleRows = {'headerRow': 'header_table',
       tableRow: 'StyleRows'} ;

        var table = new google.visualization.Table(document.getElementById('table_div'));
        table.draw(newdata, {showRowNumber: false,alternatingRowStyle: false, cssClassNames: StyleRows,});

      });

    }
  </script>

<script type="text/javascript">

            $.getJSON('Homininae_HUMAN_PANTR.json', function(data) {
            var nm = document.getElementById('total_match');
            nm.innerHTML = data.number_match;

            var nm = document.getElementById('number_perfect');
            nm.innerHTML = data.number_perfect;
            nm.innerHTML = nm.innerHTML + '  <span class="badge">'+data.ratio_perfect.toFixed(2) +'%</span>';
            nm.onclick=function(){change_data('Perfect')};

            var nm = document.getElementById('number_multi');
            nm.innerHTML = data.number_multi;
            nm.innerHTML = nm.innerHTML + '  <span class="badge">'+data.ratio_multi.toFixed(2) +'%</span>';
            nm.onclick=function(){change_data('Multi')};

            var nm = document.getElementById('number_none');
            nm.innerHTML = data.number_none;
            nm.innerHTML = nm.innerHTML + '  <span class="badge">'+data.ratio_none.toFixed(2) +'%</span>';
            nm.onclick=function(){change_data('None')};

            var nm = document.getElementById('number_semi');
            nm.innerHTML = data.number_semi;
            nm.innerHTML = nm.innerHTML + '  <span class="badge">'+data.ratio_semi.toFixed(2) +'%</span>';
            nm.onclick=function(){change_data('Semi')};

            var nm = document.getElementById('taxon');
            nm.innerHTML = data.taxon;




             });


        </script>

<script type="text/javascript">


            var v = document.getElementById('bout');
            v.onclick=function(){
            var table = document.getElementById('table_div');
            table.remove();
            var e = document.getElementById('table_div_parent');
            var para = document.createElement("p");
            para.id = 'table_div';
            para.style.height= 380;
            e.appendChild(para);
            };

</script>

</body>

</html>










